"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Web3Broadcaster = void 0;
const exceptions_1 = require("@injectivelabs/exceptions");
/**
 * Preparing and broadcasting
 * Ethereum transactions
 */
class Web3Broadcaster {
    walletStrategy;
    ethereumChainId;
    constructor({ walletStrategy, ethereumChainId, }) {
        this.walletStrategy = walletStrategy;
        this.ethereumChainId = ethereumChainId;
    }
    async sendTransaction(args) {
        const { walletStrategy, ethereumChainId } = this;
        try {
            const chainId = args.ethereumChainId || ethereumChainId;
            const txHash = await walletStrategy.sendEvmTransaction(args.tx, {
                address: args.address,
                ethereumChainId: chainId,
            });
            await walletStrategy.getEvmTransactionReceipt(txHash, chainId);
            return txHash;
        }
        catch (e) {
            throw new exceptions_1.Web3Exception(new Error(e.message));
        }
    }
}
exports.Web3Broadcaster = Web3Broadcaster;
