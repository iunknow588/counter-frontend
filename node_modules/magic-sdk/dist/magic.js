"use strict";var Magic=(()=>{var yi=Object.create;var qe=Object.defineProperty;var Ei=Object.getOwnPropertyDescriptor;var _i=Object.getOwnPropertyNames,hr=Object.getOwnPropertySymbols,Ii=Object.getPrototypeOf,pr=Object.prototype.hasOwnProperty,wi=Object.prototype.propertyIsEnumerable;var mr=(e,t,r)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vr=(e,t)=>{for(var r in t||(t={}))pr.call(t,r)&&mr(e,r,t[r]);if(hr)for(var r of hr(t))wi.call(t,r)&&mr(e,r,t[r]);return e};var Ke=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var gr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),yr=(e,t)=>{for(var r in t)qe(e,r,{get:t[r],enumerable:!0})},Er=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of _i(t))!pr.call(e,a)&&a!==r&&qe(e,a,{get:()=>t[a],enumerable:!(o=Ei(t,a))||o.enumerable});return e};var _r=(e,t,r)=>(r=e!=null?yi(Ii(e)):{},Er(t||!e||!e.__esModule?qe(r,"default",{value:e,enumerable:!0}):r,e)),bi=e=>Er(qe({},"__esModule",{value:!0}),e);var $e=(e,t,r)=>new Promise((o,a)=>{var s=g=>{try{d(r.next(g))}catch(v){a(v)}},m=g=>{try{d(r.throw(g))}catch(v){a(v)}},d=g=>g.done?o(g.value):Promise.resolve(g.value).then(s,m);d((r=r.apply(e,t)).next())});var In=gr((_n,Kt)=>{(function(e){if(typeof _n=="object"&&typeof Kt<"u")Kt.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=e()}})(function(){var e,t,r;return function o(a,s,m){function d(y,O){if(!s[y]){if(!a[y]){var _=typeof Ke=="function"&&Ke;if(!O&&_)return _(y,!0);if(g)return g(y,!0);var N=new Error("Cannot find module '"+y+"'");throw N.code="MODULE_NOT_FOUND",N}var L=s[y]={exports:{}};a[y][0].call(L.exports,function(k){var C=a[y][1][k];return d(C||k)},L,L.exports,o,a,s,m)}return s[y].exports}for(var g=typeof Ke=="function"&&Ke,v=0;v<m.length;v++)d(m[v]);return d}({1:[function(o,a,s){(function(m){"use strict";var d=m.MutationObserver||m.WebKitMutationObserver,g;if(d){var v=0,y=new d(k),O=m.document.createTextNode("");y.observe(O,{characterData:!0}),g=function(){O.data=v=++v%2}}else if(!m.setImmediate&&typeof m.MessageChannel<"u"){var _=new m.MessageChannel;_.port1.onmessage=k,g=function(){_.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?g=function(){var B=m.document.createElement("script");B.onreadystatechange=function(){k(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},m.document.documentElement.appendChild(B)}:g=function(){setTimeout(k,0)};var N,L=[];function k(){N=!0;for(var B,Q,D=L.length;D;){for(Q=L,L=[],B=-1;++B<D;)Q[B]();D=L.length}N=!1}a.exports=C;function C(B){L.push(B)===1&&!N&&g()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(o,a,s){"use strict";var m=o(1);function d(){}var g={},v=["REJECTED"],y=["FULFILLED"],O=["PENDING"];a.exports=_;function _(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=O,this.queue=[],this.outcome=void 0,S!==d&&C(this,S)}_.prototype.catch=function(S){return this.then(null,S)},_.prototype.then=function(S,G){if(typeof S!="function"&&this.state===y||typeof G!="function"&&this.state===v)return this;var U=new this.constructor(d);if(this.state!==O){var q=this.state===y?S:G;L(U,q,this.outcome)}else this.queue.push(new N(U,S,G));return U};function N(S,G,U){this.promise=S,typeof G=="function"&&(this.onFulfilled=G,this.callFulfilled=this.otherCallFulfilled),typeof U=="function"&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}N.prototype.callFulfilled=function(S){g.resolve(this.promise,S)},N.prototype.otherCallFulfilled=function(S){L(this.promise,this.onFulfilled,S)},N.prototype.callRejected=function(S){g.reject(this.promise,S)},N.prototype.otherCallRejected=function(S){L(this.promise,this.onRejected,S)};function L(S,G,U){m(function(){var q;try{q=G(U)}catch(Z){return g.reject(S,Z)}q===S?g.reject(S,new TypeError("Cannot resolve promise with itself")):g.resolve(S,q)})}g.resolve=function(S,G){var U=B(k,G);if(U.status==="error")return g.reject(S,U.value);var q=U.value;if(q)C(S,q);else{S.state=y,S.outcome=G;for(var Z=-1,oe=S.queue.length;++Z<oe;)S.queue[Z].callFulfilled(G)}return S},g.reject=function(S,G){S.state=v,S.outcome=G;for(var U=-1,q=S.queue.length;++U<q;)S.queue[U].callRejected(G);return S};function k(S){var G=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof G=="function")return function(){G.apply(S,arguments)}}function C(S,G){var U=!1;function q(ce){U||(U=!0,g.reject(S,ce))}function Z(ce){U||(U=!0,g.resolve(S,ce))}function oe(){G(Z,q)}var le=B(oe);le.status==="error"&&q(le.value)}function B(S,G){var U={};try{U.value=S(G),U.status="success"}catch(q){U.status="error",U.value=q}return U}_.resolve=Q;function Q(S){return S instanceof this?S:g.resolve(new this(d),S)}_.reject=D;function D(S){var G=new this(d);return g.reject(G,S)}_.all=Ie;function Ie(S){var G=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=S.length,q=!1;if(!U)return this.resolve([]);for(var Z=new Array(U),oe=0,le=-1,ce=new this(d);++le<U;)de(S[le],le);return ce;function de(Ae,h){G.resolve(Ae).then(I,function(A){q||(q=!0,g.reject(ce,A))});function I(A){Z[h]=A,++oe===U&&!q&&(q=!0,g.resolve(ce,Z))}}}_.race=ie;function ie(S){var G=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=S.length,q=!1;if(!U)return this.resolve([]);for(var Z=-1,oe=new this(d);++Z<U;)le(S[Z]);return oe;function le(ce){G.resolve(ce).then(function(de){q||(q=!0,g.resolve(oe,de))},function(de){q||(q=!0,g.reject(oe,de))})}}},{1:1}],3:[function(o,a,s){(function(m){"use strict";typeof m.Promise!="function"&&(m.Promise=o(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(o,a,s){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function d(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}function g(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var v=g();function y(){try{if(!v||!v.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),l=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||l)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function O(n,l){n=n||[],l=l||{};try{return new Blob(n,l)}catch(c){if(c.name!=="TypeError")throw c;for(var i=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,u=new i,f=0;f<n.length;f+=1)u.append(n[f]);return u.getBlob(l.type)}}typeof Promise>"u"&&o(3);var _=Promise;function N(n,l){l&&n.then(function(i){l(null,i)},function(i){l(i)})}function L(n,l,i){typeof l=="function"&&n.then(l),typeof i=="function"&&n.catch(i)}function k(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function C(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var B="local-forage-detect-blob-support",Q=void 0,D={},Ie=Object.prototype.toString,ie="readonly",S="readwrite";function G(n){for(var l=n.length,i=new ArrayBuffer(l),u=new Uint8Array(i),f=0;f<l;f++)u[f]=n.charCodeAt(f);return i}function U(n){return new _(function(l){var i=n.transaction(B,S),u=O([""]);i.objectStore(B).put(u,"key"),i.onabort=function(f){f.preventDefault(),f.stopPropagation(),l(!1)},i.oncomplete=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);l(c||!f||parseInt(f[1],10)>=43)}}).catch(function(){return!1})}function q(n){return typeof Q=="boolean"?_.resolve(Q):U(n).then(function(l){return Q=l,Q})}function Z(n){var l=D[n.name],i={};i.promise=new _(function(u,f){i.resolve=u,i.reject=f}),l.deferredOperations.push(i),l.dbReady?l.dbReady=l.dbReady.then(function(){return i.promise}):l.dbReady=i.promise}function oe(n){var l=D[n.name],i=l.deferredOperations.pop();if(i)return i.resolve(),i.promise}function le(n,l){var i=D[n.name],u=i.deferredOperations.pop();if(u)return u.reject(l),u.promise}function ce(n,l){return new _(function(i,u){if(D[n.name]=D[n.name]||ee(),n.db)if(l)Z(n),n.db.close();else return i(n.db);var f=[n.name];l&&f.push(n.version);var c=v.open.apply(v,f);l&&(c.onupgradeneeded=function(p){var E=c.result;try{E.createObjectStore(n.storeName),p.oldVersion<=1&&E.createObjectStore(B)}catch(w){if(w.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+p.oldVersion+" to version "+p.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw w}}),c.onerror=function(p){p.preventDefault(),u(c.error)},c.onsuccess=function(){var p=c.result;p.onversionchange=function(E){E.target.close()},i(p),oe(n)}})}function de(n){return ce(n,!1)}function Ae(n){return ce(n,!0)}function h(n,l){if(!n.db)return!0;var i=!n.db.objectStoreNames.contains(n.storeName),u=n.version<n.db.version,f=n.version>n.db.version;if(u&&(n.version!==l&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),f||i){if(i){var c=n.db.version+1;c>n.version&&(n.version=c)}return!0}return!1}function I(n){return new _(function(l,i){var u=new FileReader;u.onerror=i,u.onloadend=function(f){var c=btoa(f.target.result||"");l({__local_forage_encoded_blob:!0,data:c,type:n.type})},u.readAsBinaryString(n)})}function A(n){var l=G(atob(n.data));return O([l],{type:n.type})}function P(n){return n&&n.__local_forage_encoded_blob}function $(n){var l=this,i=l._initReady().then(function(){var u=D[l._dbInfo.name];if(u&&u.dbReady)return u.dbReady});return L(i,n,n),i}function x(n){Z(n);for(var l=D[n.name],i=l.forages,u=0;u<i.length;u++){var f=i[u];f._dbInfo.db&&(f._dbInfo.db.close(),f._dbInfo.db=null)}return n.db=null,de(n).then(function(c){return n.db=c,h(n)?Ae(n):c}).then(function(c){n.db=l.db=c;for(var p=0;p<i.length;p++)i[p]._dbInfo.db=c}).catch(function(c){throw le(n,c),c})}function j(n,l,i,u){u===void 0&&(u=1);try{var f=n.db.transaction(n.storeName,l);i(null,f)}catch(c){if(u>0&&(!n.db||c.name==="InvalidStateError"||c.name==="NotFoundError"))return _.resolve().then(function(){if(!n.db||c.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),Ae(n)}).then(function(){return x(n).then(function(){j(n,l,i,u-1)})}).catch(i);i(c)}}function ee(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ce(n){var l=this,i={db:null};if(n)for(var u in n)i[u]=n[u];var f=D[i.name];f||(f=ee(),D[i.name]=f),f.forages.push(l),l._initReady||(l._initReady=l.ready,l.ready=$);var c=[];function p(){return _.resolve()}for(var E=0;E<f.forages.length;E++){var w=f.forages[E];w!==l&&c.push(w._initReady().catch(p))}var b=f.forages.slice(0);return _.all(c).then(function(){return i.db=f.db,de(i)}).then(function(R){return i.db=R,h(i,l._defaultConfig.version)?Ae(i):R}).then(function(R){i.db=f.db=R,l._dbInfo=i;for(var T=0;T<b.length;T++){var F=b[T];F!==l&&(F._dbInfo.db=i.db,F._dbInfo.version=i.version)}})}function Se(n,l){var i=this;n=k(n);var u=new _(function(f,c){i.ready().then(function(){j(i._dbInfo,ie,function(p,E){if(p)return c(p);try{var w=E.objectStore(i._dbInfo.storeName),b=w.get(n);b.onsuccess=function(){var R=b.result;R===void 0&&(R=null),P(R)&&(R=A(R)),f(R)},b.onerror=function(){c(b.error)}}catch(R){c(R)}})}).catch(c)});return N(u,l),u}function Ge(n,l){var i=this,u=new _(function(f,c){i.ready().then(function(){j(i._dbInfo,ie,function(p,E){if(p)return c(p);try{var w=E.objectStore(i._dbInfo.storeName),b=w.openCursor(),R=1;b.onsuccess=function(){var T=b.result;if(T){var F=T.value;P(F)&&(F=A(F));var V=n(F,T.key,R++);V!==void 0?f(V):T.continue()}else f()},b.onerror=function(){c(b.error)}}catch(T){c(T)}})}).catch(c)});return N(u,l),u}function Rn(n,l,i){var u=this;n=k(n);var f=new _(function(c,p){var E;u.ready().then(function(){return E=u._dbInfo,Ie.call(l)==="[object Blob]"?q(E.db).then(function(w){return w?l:I(l)}):l}).then(function(w){j(u._dbInfo,S,function(b,R){if(b)return p(b);try{var T=R.objectStore(u._dbInfo.storeName);w===null&&(w=void 0);var F=T.put(w,n);R.oncomplete=function(){w===void 0&&(w=null),c(w)},R.onabort=R.onerror=function(){var V=F.error?F.error:F.transaction.error;p(V)}}catch(V){p(V)}})}).catch(p)});return N(f,i),f}function An(n,l){var i=this;n=k(n);var u=new _(function(f,c){i.ready().then(function(){j(i._dbInfo,S,function(p,E){if(p)return c(p);try{var w=E.objectStore(i._dbInfo.storeName),b=w.delete(n);E.oncomplete=function(){f()},E.onerror=function(){c(b.error)},E.onabort=function(){var R=b.error?b.error:b.transaction.error;c(R)}}catch(R){c(R)}})}).catch(c)});return N(u,l),u}function Sn(n){var l=this,i=new _(function(u,f){l.ready().then(function(){j(l._dbInfo,S,function(c,p){if(c)return f(c);try{var E=p.objectStore(l._dbInfo.storeName),w=E.clear();p.oncomplete=function(){u()},p.onabort=p.onerror=function(){var b=w.error?w.error:w.transaction.error;f(b)}}catch(b){f(b)}})}).catch(f)});return N(i,n),i}function Nn(n){var l=this,i=new _(function(u,f){l.ready().then(function(){j(l._dbInfo,ie,function(c,p){if(c)return f(c);try{var E=p.objectStore(l._dbInfo.storeName),w=E.count();w.onsuccess=function(){u(w.result)},w.onerror=function(){f(w.error)}}catch(b){f(b)}})}).catch(f)});return N(i,n),i}function On(n,l){var i=this,u=new _(function(f,c){if(n<0){f(null);return}i.ready().then(function(){j(i._dbInfo,ie,function(p,E){if(p)return c(p);try{var w=E.objectStore(i._dbInfo.storeName),b=!1,R=w.openKeyCursor();R.onsuccess=function(){var T=R.result;if(!T){f(null);return}n===0||b?f(T.key):(b=!0,T.advance(n))},R.onerror=function(){c(R.error)}}catch(T){c(T)}})}).catch(c)});return N(u,l),u}function Tn(n){var l=this,i=new _(function(u,f){l.ready().then(function(){j(l._dbInfo,ie,function(c,p){if(c)return f(c);try{var E=p.objectStore(l._dbInfo.storeName),w=E.openKeyCursor(),b=[];w.onsuccess=function(){var R=w.result;if(!R){u(b);return}b.push(R.key),R.continue()},w.onerror=function(){f(w.error)}}catch(R){f(R)}})}).catch(f)});return N(i,n),i}function Mn(n,l){l=C.apply(this,arguments);var i=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||i.name,n.storeName=n.storeName||i.storeName);var u=this,f;if(!n.name)f=_.reject("Invalid arguments");else{var c=n.name===i.name&&u._dbInfo.db,p=c?_.resolve(u._dbInfo.db):de(n).then(function(E){var w=D[n.name],b=w.forages;w.db=E;for(var R=0;R<b.length;R++)b[R]._dbInfo.db=E;return E});n.storeName?f=p.then(function(E){if(!!E.objectStoreNames.contains(n.storeName)){var w=E.version+1;Z(n);var b=D[n.name],R=b.forages;E.close();for(var T=0;T<R.length;T++){var F=R[T];F._dbInfo.db=null,F._dbInfo.version=w}var V=new _(function(K,J){var z=v.open(n.name,w);z.onerror=function(fe){var Ve=z.result;Ve.close(),J(fe)},z.onupgradeneeded=function(){var fe=z.result;fe.deleteObjectStore(n.storeName)},z.onsuccess=function(){var fe=z.result;fe.close(),K(fe)}});return V.then(function(K){b.db=K;for(var J=0;J<R.length;J++){var z=R[J];z._dbInfo.db=K,oe(z._dbInfo)}}).catch(function(K){throw(le(n,K)||_.resolve()).catch(function(){}),K})}}):f=p.then(function(E){Z(n);var w=D[n.name],b=w.forages;E.close();for(var R=0;R<b.length;R++){var T=b[R];T._dbInfo.db=null}var F=new _(function(V,K){var J=v.deleteDatabase(n.name);J.onerror=function(){var z=J.result;z&&z.close(),K(J.error)},J.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},J.onsuccess=function(){var z=J.result;z&&z.close(),V(z)}});return F.then(function(V){w.db=V;for(var K=0;K<b.length;K++){var J=b[K];oe(J._dbInfo)}}).catch(function(V){throw(le(n,V)||_.resolve()).catch(function(){}),V})})}return N(f,l),f}var Ln={_driver:"asyncStorage",_initStorage:Ce,_support:y(),iterate:Ge,getItem:Se,setItem:Rn,removeItem:An,clear:Sn,length:Nn,key:On,keys:Tn,dropInstance:Mn};function Cn(){return typeof openDatabase=="function"}var we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pn="~~local_forage_type~",Yt=/^~~local_forage_type~([^~]+)~/,nt="__lfsc__:",wt=nt.length,bt="arbf",Rt="blob",Xt="si08",zt="ui08",Jt="uic8",Qt="si16",Zt="si32",er="ur16",tr="ui32",rr="fl32",nr="fl64",ir=wt+bt.length,or=Object.prototype.toString;function ar(n){var l=n.length*.75,i=n.length,u,f=0,c,p,E,w;n[n.length-1]==="="&&(l--,n[n.length-2]==="="&&l--);var b=new ArrayBuffer(l),R=new Uint8Array(b);for(u=0;u<i;u+=4)c=we.indexOf(n[u]),p=we.indexOf(n[u+1]),E=we.indexOf(n[u+2]),w=we.indexOf(n[u+3]),R[f++]=c<<2|p>>4,R[f++]=(p&15)<<4|E>>2,R[f++]=(E&3)<<6|w&63;return b}function At(n){var l=new Uint8Array(n),i="",u;for(u=0;u<l.length;u+=3)i+=we[l[u]>>2],i+=we[(l[u]&3)<<4|l[u+1]>>4],i+=we[(l[u+1]&15)<<2|l[u+2]>>6],i+=we[l[u+2]&63];return l.length%3===2?i=i.substring(0,i.length-1)+"=":l.length%3===1&&(i=i.substring(0,i.length-2)+"=="),i}function $n(n,l){var i="";if(n&&(i=or.call(n)),n&&(i==="[object ArrayBuffer]"||n.buffer&&or.call(n.buffer)==="[object ArrayBuffer]")){var u,f=nt;n instanceof ArrayBuffer?(u=n,f+=bt):(u=n.buffer,i==="[object Int8Array]"?f+=Xt:i==="[object Uint8Array]"?f+=zt:i==="[object Uint8ClampedArray]"?f+=Jt:i==="[object Int16Array]"?f+=Qt:i==="[object Uint16Array]"?f+=er:i==="[object Int32Array]"?f+=Zt:i==="[object Uint32Array]"?f+=tr:i==="[object Float32Array]"?f+=rr:i==="[object Float64Array]"?f+=nr:l(new Error("Failed to get type for BinaryArray"))),l(f+At(u))}else if(i==="[object Blob]"){var c=new FileReader;c.onload=function(){var p=Pn+n.type+"~"+At(this.result);l(nt+Rt+p)},c.readAsArrayBuffer(n)}else try{l(JSON.stringify(n))}catch(p){console.error("Couldn't convert value into a JSON string: ",n),l(null,p)}}function Dn(n){if(n.substring(0,wt)!==nt)return JSON.parse(n);var l=n.substring(ir),i=n.substring(wt,ir),u;if(i===Rt&&Yt.test(l)){var f=l.match(Yt);u=f[1],l=l.substring(f[0].length)}var c=ar(l);switch(i){case bt:return c;case Rt:return O([c],{type:u});case Xt:return new Int8Array(c);case zt:return new Uint8Array(c);case Jt:return new Uint8ClampedArray(c);case Qt:return new Int16Array(c);case er:return new Uint16Array(c);case Zt:return new Int32Array(c);case tr:return new Uint32Array(c);case rr:return new Float32Array(c);case nr:return new Float64Array(c);default:throw new Error("Unkown type: "+i)}}var St={serialize:$n,deserialize:Dn,stringToBuffer:ar,bufferToString:At};function sr(n,l,i,u){n.executeSql("CREATE TABLE IF NOT EXISTS "+l.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,u)}function xn(n){var l=this,i={db:null};if(n)for(var u in n)i[u]=typeof n[u]!="string"?n[u].toString():n[u];var f=new _(function(c,p){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(E){return p(E)}i.db.transaction(function(E){sr(E,i,function(){l._dbInfo=i,c()},function(w,b){p(b)})},p)});return i.serializer=St,f}function be(n,l,i,u,f,c){n.executeSql(i,u,f,function(p,E){E.code===E.SYNTAX_ERR?p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[l.storeName],function(w,b){b.rows.length?c(w,E):sr(w,l,function(){w.executeSql(i,u,f,c)},c)},c):c(p,E)},c)}function Un(n,l){var i=this;n=k(n);var u=new _(function(f,c){i.ready().then(function(){var p=i._dbInfo;p.db.transaction(function(E){be(E,p,"SELECT * FROM "+p.storeName+" WHERE key = ? LIMIT 1",[n],function(w,b){var R=b.rows.length?b.rows.item(0).value:null;R&&(R=p.serializer.deserialize(R)),f(R)},function(w,b){c(b)})})}).catch(c)});return N(u,l),u}function kn(n,l){var i=this,u=new _(function(f,c){i.ready().then(function(){var p=i._dbInfo;p.db.transaction(function(E){be(E,p,"SELECT * FROM "+p.storeName,[],function(w,b){for(var R=b.rows,T=R.length,F=0;F<T;F++){var V=R.item(F),K=V.value;if(K&&(K=p.serializer.deserialize(K)),K=n(K,V.key,F+1),K!==void 0){f(K);return}}f()},function(w,b){c(b)})})}).catch(c)});return N(u,l),u}function lr(n,l,i,u){var f=this;n=k(n);var c=new _(function(p,E){f.ready().then(function(){l===void 0&&(l=null);var w=l,b=f._dbInfo;b.serializer.serialize(l,function(R,T){T?E(T):b.db.transaction(function(F){be(F,b,"INSERT OR REPLACE INTO "+b.storeName+" (key, value) VALUES (?, ?)",[n,R],function(){p(w)},function(V,K){E(K)})},function(F){if(F.code===F.QUOTA_ERR){if(u>0){p(lr.apply(f,[n,w,i,u-1]));return}E(F)}})})}).catch(E)});return N(c,i),c}function Fn(n,l,i){return lr.apply(this,[n,l,i,1])}function Wn(n,l){var i=this;n=k(n);var u=new _(function(f,c){i.ready().then(function(){var p=i._dbInfo;p.db.transaction(function(E){be(E,p,"DELETE FROM "+p.storeName+" WHERE key = ?",[n],function(){f()},function(w,b){c(b)})})}).catch(c)});return N(u,l),u}function Bn(n){var l=this,i=new _(function(u,f){l.ready().then(function(){var c=l._dbInfo;c.db.transaction(function(p){be(p,c,"DELETE FROM "+c.storeName,[],function(){u()},function(E,w){f(w)})})}).catch(f)});return N(i,n),i}function Gn(n){var l=this,i=new _(function(u,f){l.ready().then(function(){var c=l._dbInfo;c.db.transaction(function(p){be(p,c,"SELECT COUNT(key) as c FROM "+c.storeName,[],function(E,w){var b=w.rows.item(0).c;u(b)},function(E,w){f(w)})})}).catch(f)});return N(i,n),i}function jn(n,l){var i=this,u=new _(function(f,c){i.ready().then(function(){var p=i._dbInfo;p.db.transaction(function(E){be(E,p,"SELECT key FROM "+p.storeName+" WHERE id = ? LIMIT 1",[n+1],function(w,b){var R=b.rows.length?b.rows.item(0).key:null;f(R)},function(w,b){c(b)})})}).catch(c)});return N(u,l),u}function Vn(n){var l=this,i=new _(function(u,f){l.ready().then(function(){var c=l._dbInfo;c.db.transaction(function(p){be(p,c,"SELECT key FROM "+c.storeName,[],function(E,w){for(var b=[],R=0;R<w.rows.length;R++)b.push(w.rows.item(R).key);u(b)},function(E,w){f(w)})})}).catch(f)});return N(i,n),i}function qn(n){return new _(function(l,i){n.transaction(function(u){u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(f,c){for(var p=[],E=0;E<c.rows.length;E++)p.push(c.rows.item(E).name);l({db:n,storeNames:p})},function(f,c){i(c)})},function(u){i(u)})})}function Kn(n,l){l=C.apply(this,arguments);var i=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||i.name,n.storeName=n.storeName||i.storeName);var u=this,f;return n.name?f=new _(function(c){var p;n.name===i.name?p=u._dbInfo.db:p=openDatabase(n.name,"","",0),n.storeName?c({db:p,storeNames:[n.storeName]}):c(qn(p))}).then(function(c){return new _(function(p,E){c.db.transaction(function(w){function b(V){return new _(function(K,J){w.executeSql("DROP TABLE IF EXISTS "+V,[],function(){K()},function(z,fe){J(fe)})})}for(var R=[],T=0,F=c.storeNames.length;T<F;T++)R.push(b(c.storeNames[T]));_.all(R).then(function(){p()}).catch(function(V){E(V)})},function(w){E(w)})})}):f=_.reject("Invalid arguments"),N(f,l),f}var Hn={_driver:"webSQLStorage",_initStorage:xn,_support:Cn(),iterate:kn,getItem:Un,setItem:Fn,removeItem:Wn,clear:Bn,length:Gn,key:jn,keys:Vn,dropInstance:Kn};function Yn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function cr(n,l){var i=n.name+"/";return n.storeName!==l.storeName&&(i+=n.storeName+"/"),i}function Xn(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function zn(){return!Xn()||localStorage.length>0}function Jn(n){var l=this,i={};if(n)for(var u in n)i[u]=n[u];return i.keyPrefix=cr(n,l._defaultConfig),zn()?(l._dbInfo=i,i.serializer=St,_.resolve()):_.reject()}function Qn(n){var l=this,i=l.ready().then(function(){for(var u=l._dbInfo.keyPrefix,f=localStorage.length-1;f>=0;f--){var c=localStorage.key(f);c.indexOf(u)===0&&localStorage.removeItem(c)}});return N(i,n),i}function Zn(n,l){var i=this;n=k(n);var u=i.ready().then(function(){var f=i._dbInfo,c=localStorage.getItem(f.keyPrefix+n);return c&&(c=f.serializer.deserialize(c)),c});return N(u,l),u}function ei(n,l){var i=this,u=i.ready().then(function(){for(var f=i._dbInfo,c=f.keyPrefix,p=c.length,E=localStorage.length,w=1,b=0;b<E;b++){var R=localStorage.key(b);if(R.indexOf(c)===0){var T=localStorage.getItem(R);if(T&&(T=f.serializer.deserialize(T)),T=n(T,R.substring(p),w++),T!==void 0)return T}}});return N(u,l),u}function ti(n,l){var i=this,u=i.ready().then(function(){var f=i._dbInfo,c;try{c=localStorage.key(n)}catch{c=null}return c&&(c=c.substring(f.keyPrefix.length)),c});return N(u,l),u}function ri(n){var l=this,i=l.ready().then(function(){for(var u=l._dbInfo,f=localStorage.length,c=[],p=0;p<f;p++){var E=localStorage.key(p);E.indexOf(u.keyPrefix)===0&&c.push(E.substring(u.keyPrefix.length))}return c});return N(i,n),i}function ni(n){var l=this,i=l.keys().then(function(u){return u.length});return N(i,n),i}function ii(n,l){var i=this;n=k(n);var u=i.ready().then(function(){var f=i._dbInfo;localStorage.removeItem(f.keyPrefix+n)});return N(u,l),u}function oi(n,l,i){var u=this;n=k(n);var f=u.ready().then(function(){l===void 0&&(l=null);var c=l;return new _(function(p,E){var w=u._dbInfo;w.serializer.serialize(l,function(b,R){if(R)E(R);else try{localStorage.setItem(w.keyPrefix+n,b),p(c)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&E(T),E(T)}})})});return N(f,i),f}function ai(n,l){if(l=C.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var i=this.config();n.name=n.name||i.name,n.storeName=n.storeName||i.storeName}var u=this,f;return n.name?f=new _(function(c){n.storeName?c(cr(n,u._defaultConfig)):c(n.name+"/")}).then(function(c){for(var p=localStorage.length-1;p>=0;p--){var E=localStorage.key(p);E.indexOf(c)===0&&localStorage.removeItem(E)}}):f=_.reject("Invalid arguments"),N(f,l),f}var si={_driver:"localStorageWrapper",_initStorage:Jn,_support:Yn(),iterate:ei,getItem:Zn,setItem:oi,removeItem:ii,clear:Qn,length:ni,key:ti,keys:ri,dropInstance:ai},li=function(l,i){return l===i||typeof l=="number"&&typeof i=="number"&&isNaN(l)&&isNaN(i)},ci=function(l,i){for(var u=l.length,f=0;f<u;){if(li(l[f],i))return!0;f++}return!1},ur=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},je={},fr={},Pe={INDEXEDDB:Ln,WEBSQL:Hn,LOCALSTORAGE:si},ui=[Pe.INDEXEDDB._driver,Pe.WEBSQL._driver,Pe.LOCALSTORAGE._driver],it=["dropInstance"],Nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(it),fi={description:"",driver:ui.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function di(n,l){n[l]=function(){var i=arguments;return n.ready().then(function(){return n[l].apply(n,i)})}}function Ot(){for(var n=1;n<arguments.length;n++){var l=arguments[n];if(l)for(var i in l)l.hasOwnProperty(i)&&(ur(l[i])?arguments[0][i]=l[i].slice():arguments[0][i]=l[i])}return arguments[0]}var hi=function(){function n(l){d(this,n);for(var i in Pe)if(Pe.hasOwnProperty(i)){var u=Pe[i],f=u._driver;this[i]=f,je[f]||this.defineDriver(u)}this._defaultConfig=Ot({},fi),this._config=Ot({},this._defaultConfig,l),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(i){if((typeof i>"u"?"undefined":m(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var u in i){if(u==="storeName"&&(i[u]=i[u].replace(/\W/g,"_")),u==="version"&&typeof i[u]!="number")return new Error("Database version must be a number.");this._config[u]=i[u]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},n.prototype.defineDriver=function(i,u,f){var c=new _(function(p,E){try{var w=i._driver,b=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){E(b);return}for(var R=Nt.concat("_initStorage"),T=0,F=R.length;T<F;T++){var V=R[T],K=!ci(it,V);if((K||i[V])&&typeof i[V]!="function"){E(b);return}}var J=function(){for(var Ve=function(vi){return function(){var gi=new Error("Method "+vi+" is not implemented by the current driver"),dr=_.reject(gi);return N(dr,arguments[arguments.length-1]),dr}},Tt=0,pi=it.length;Tt<pi;Tt++){var Mt=it[Tt];i[Mt]||(i[Mt]=Ve(Mt))}};J();var z=function(Ve){je[w]&&console.info("Redefining LocalForage driver: "+w),je[w]=i,fr[w]=Ve,p()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(z,E):z(!!i._support):z(!0)}catch(fe){E(fe)}});return L(c,u,f),c},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(i,u,f){var c=je[i]?_.resolve(je[i]):_.reject(new Error("Driver not found."));return L(c,u,f),c},n.prototype.getSerializer=function(i){var u=_.resolve(St);return L(u,i),u},n.prototype.ready=function(i){var u=this,f=u._driverSet.then(function(){return u._ready===null&&(u._ready=u._initDriver()),u._ready});return L(f,i,i),f},n.prototype.setDriver=function(i,u,f){var c=this;ur(i)||(i=[i]);var p=this._getSupportedDrivers(i);function E(){c._config.driver=c.driver()}function w(T){return c._extend(T),E(),c._ready=c._initStorage(c._config),c._ready}function b(T){return function(){var F=0;function V(){for(;F<T.length;){var K=T[F];return F++,c._dbInfo=null,c._ready=null,c.getDriver(K).then(w).catch(V)}E();var J=new Error("No available storage method found.");return c._driverSet=_.reject(J),c._driverSet}return V()}}var R=this._driverSet!==null?this._driverSet.catch(function(){return _.resolve()}):_.resolve();return this._driverSet=R.then(function(){var T=p[0];return c._dbInfo=null,c._ready=null,c.getDriver(T).then(function(F){c._driver=F._driver,E(),c._wrapLibraryMethodsWithReady(),c._initDriver=b(p)})}).catch(function(){E();var T=new Error("No available storage method found.");return c._driverSet=_.reject(T),c._driverSet}),L(this._driverSet,u,f),this._driverSet},n.prototype.supports=function(i){return!!fr[i]},n.prototype._extend=function(i){Ot(this,i)},n.prototype._getSupportedDrivers=function(i){for(var u=[],f=0,c=i.length;f<c;f++){var p=i[f];this.supports(p)&&u.push(p)}return u},n.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,u=Nt.length;i<u;i++)di(this,Nt[i])},n.prototype.createInstance=function(i){return new n(i)},n}(),mi=new hi;a.exports=mi},{3:3}]},{},[4])(4)})});var bn=gr((Et,wn)=>{(function(e,t){typeof Et=="object"&&typeof wn<"u"?t(Et):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],t):t(e.LocalforageDriverMemory={})})(typeof self<"u"?self:Et,function(e){"use strict";var t="localforage-driver-memory";function r(h){var I=typeof Symbol=="function"&&h[Symbol.iterator],A=0;return I?I.call(h):{next:function(){return h&&A>=h.length&&(h=void 0),{value:h&&h[A++],done:!h}}}}function o(h,I){h=h||[],I=I||{};try{return new Blob(h,I)}catch(x){if(x.name!=="TypeError")throw x;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,P=new A,$=0;$<h.length;$+=1)P.append(h[$]);return P.getBlob(I.type)}}var a=/^~~local_forage_type~([^~]+)~/,s=9,m=s+4,d=Object.prototype.toString;function g(h){var I=h.length*.75,A=h.length;h[h.length-1]==="="&&(I--,h[h.length-2]==="="&&I--);for(var P=new ArrayBuffer(I),$=new Uint8Array(P),x=0,j=0;x<A;x+=4){var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[x]),Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[x+1]),Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[x+2]),Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[x+3]);$[j++]=ee<<2|Ce>>4,$[j++]=(Ce&15)<<4|Se>>2,$[j++]=(Se&3)<<6|Ge&63}return P}function v(h){for(var I=new Uint8Array(h),A="",P=0;P<I.length;P+=3)A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[P]>>2],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[P]&3)<<4|I[P+1]>>4],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[P+1]&15)<<2|I[P+2]>>6],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[P+2]&63];return I.length%3===2?A=A.substring(0,A.length-1)+"=":I.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function y(h,I){var A="";if(h&&(A=d.call(h)),h&&(A==="[object ArrayBuffer]"||h.buffer&&d.call(h.buffer)==="[object ArrayBuffer]")){var P=void 0,$="__lfsc__:";h instanceof ArrayBuffer?(P=h,$+="arbf"):(P=h.buffer,A==="[object Int8Array]"?$+="si08":A==="[object Uint8Array]"?$+="ui08":A==="[object Uint8ClampedArray]"?$+="uic8":A==="[object Int16Array]"?$+="si16":A==="[object Uint16Array]"?$+="ur16":A==="[object Int32Array]"?$+="si32":A==="[object Uint32Array]"?$+="ui32":A==="[object Float32Array]"?$+="fl32":A==="[object Float64Array]"?$+="fl64":I(new Error("Failed to get type for BinaryArray"))),I($+v(P))}else if(A==="[object Blob]"){var x=new FileReader;x.onload=function(){var j="~~local_forage_type~"+h.type+"~"+v(this.result);I("__lfsc__:blob"+j)},x.readAsArrayBuffer(h)}else try{I(JSON.stringify(h))}catch(j){console.error("Couldn't convert value into a JSON string: ",h),I(null,j)}}function O(h){if(h.substring(0,s)!=="__lfsc__:")return JSON.parse(h);var I=h.substring(m),A=h.substring(s,m),P;if(A==="blob"&&a.test(I)){var $=I.match(a);P=$[1],I=I.substring($[0].length)}var x=g(I);switch(A){case"arbf":return x;case"blob":return o([x],{type:P});case"si08":return new Int8Array(x);case"ui08":return new Uint8Array(x);case"uic8":return new Uint8ClampedArray(x);case"si16":return new Int16Array(x);case"ur16":return new Uint16Array(x);case"si32":return new Int32Array(x);case"ui32":return new Uint32Array(x);case"fl32":return new Float32Array(x);case"fl64":return new Float64Array(x);default:throw new Error("Unkown type: "+A)}}function _(h){var I,A;if(h===null||typeof h!="object"||"isActiveClone"in h)return h;var P=h instanceof Date?new Date(h):h.constructor();try{for(var $=r(Object.keys(h)),x=$.next();!x.done;x=$.next()){var j=x.value;Object.prototype.hasOwnProperty.call(h,j)&&(h.isActiveClone=null,P[j]=_(h[j]),delete h.isActiveClone)}}catch(ee){I={error:ee}}finally{try{x&&!x.done&&(A=$.return)&&A.call($)}finally{if(I)throw I.error}}return P}function N(h,I){return(h.name||I.name)+"/"+(h.storeName||I.storeName)+"/"}function L(h,I){I&&h.then(function(A){I(null,A)},function(A){I(A)})}function k(){for(var h=[],I=0;I<arguments.length;I++)h[I]=arguments[I];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function C(h,I){var A=this;if(I=k.apply(this,arguments),h=typeof h!="function"&&h||{},!h.name){var P=this.config();h.name=h.name||P.name,h.storeName=h.storeName||P.storeName}var $;return h.name?$=new Promise(function(x){h.storeName?x(N(h,A._defaultConfig)):x(h.name+"/")}):$=Promise.reject("Invalid arguments"),{promise:$,callback:I}}function B(h){return typeof h!="string"&&(console.warn(h+" used as a key, but it is not a string."),h=String(h)),h}var Q={bufferToString:v,deserialize:O,serialize:y,stringToBuffer:g},D={},Ie=function(){function h(I){this.kp=I,this.data={}}return h.resolve=function(I){return D[I]||(D[I]=new h(I)),D[I]},h.prototype.clear=function(){this.data={}},h.prototype.drop=function(){this.clear(),delete D[this.kp]},h.prototype.get=function(I){return this.data[I]},h.prototype.key=function(I){return this.keys()[I]},h.prototype.keys=function(){return Object.keys(this.data)},h.prototype.rm=function(I){delete this.data[I]},h.prototype.set=function(I,A){this.data[I]=A},h}();function ie(h){var I=h?_(h):{},A=N(I,this._defaultConfig),P=Ie.resolve(A);return this._dbInfo=I,this._dbInfo.serializer=Q,this._dbInfo.keyPrefix=A,this._dbInfo.mStore=P,Promise.resolve()}function S(h){var I=this,A=this.ready().then(function(){I._dbInfo.mStore.clear()});return L(A,h),A}function G(h,I){var A=C.apply(this,arguments),P=A.promise,$=A.callback,x=P.then(function(j){Ie.resolve(j).drop()});return L(x,$),P}function U(h,I){var A=this;h=B(h);var P=this.ready().then(function(){var $=A._dbInfo.mStore.get(h);return $==null?null:A._dbInfo.serializer.deserialize($)});return L(P,I),P}function q(h,I){var A=this,P=this.ready().then(function(){for(var $=A._dbInfo.mStore,x=$.keys(),j=0;j<x.length;j++){var ee=$.get(x[j]);if(ee&&(ee=A._dbInfo.serializer.deserialize(ee)),ee=h(ee,x[j],j+1),ee!==void 0)return ee}});return L(P,I),P}function Z(h,I){var A=this,P=this.ready().then(function(){var $;try{$=A._dbInfo.mStore.key(h),$===void 0&&($=null)}catch{$=null}return $});return L(P,I),P}function oe(h){var I=this,A=this.ready().then(function(){return I._dbInfo.mStore.keys()});return L(A,h),A}function le(h){var I=this.keys().then(function(A){return A.length});return L(I,h),I}function ce(h,I){var A=this;h=B(h);var P=this.ready().then(function(){A._dbInfo.mStore.rm(h)});return L(P,I),P}function de(h,I,A){var P=this;h=B(h);var $=this.ready().then(function(){I===void 0&&(I=null);var x=I;return new Promise(function(j,ee){P._dbInfo.serializer.serialize(I,function(Ce,Se){if(Se)ee(Se);else try{P._dbInfo.mStore.set(h,Ce),j(x)}catch(Ge){ee(Ge)}})})});return L($,A),$}var Ae=!0;e._support=Ae,e._driver=t,e._initStorage=ie,e.clear=S,e.dropInstance=G,e.getItem=U,e.iterate=q,e.key=Z,e.keys=oe,e.length=le,e.removeItem=ce,e.setItem=de,Object.defineProperty(e,"__esModule",{value:!0})})});var Aa={};yr(Aa,{default:()=>Ra});var ve=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(ve||{}),ge=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e.ProductAnnouncement="ANNOUNCEMENT",e))(ge||{}),De=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e))(De||{}),ue=(e=>(e.MetaMask="metamask",e.CoinbaseWallet="coinbase_wallet",e))(ue||{}),xe=(e=>(e.WalletSelected="wallet_selected",e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e))(xe||{}),M=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.NFTCheckout="magic_nft_checkout",e.NFTTransfer="magic_nft_transfer",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e.ShowNFTs="magic_show_nfts",e.ShowOnRamp="magic_show_fiat_onramp",e.ShowSendTokensUI="magic_show_send_tokens_ui",e.ShowAddress="magic_show_address",e.ShowBalances="magic_show_balances",e.SendGaslessTransaction="eth_sendGaslessTransaction",e.RevealPK="magic_reveal_key",e.EnableMFA="magic_auth_enable_mfa_flow",e.DisableMFA="magic_auth_disable_mfa_flow",e))(M||{}),me=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e.MAGIC_SEND_PRODUCT_ANNOUNCEMENT="MAGIC_SEND_PRODUCT_ANNOUNCEMENT",e))(me||{}),Ne=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(Ne||{}),Ir=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(Ir||{}),wr=(e=>(e.Retry="retry",e))(wr||{}),br=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(br||{}),ye=(e=>(e.VerifyEmailOtp="verify-email-otp",e.VerifyMFACode="verify-mfa-code",e.Cancel="cancel",e))(ye||{}),Oe=(e=>(e.VerifySmsOtp="verify-sms-otp",e.Cancel="cancel",e.Retry="retry",e))(Oe||{}),Rr=(e=>(e.SmsOTPSent="sms-otp-sent",e.InvalidSmsOtp="invalid-sms-otp",e.ExpiredSmsOtp="expired-sms-otp",e))(Rr||{}),Ar=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e.InvalidMfaOtp="invalid-mfa-otp",e.ExpiredEmailOtp="expired-email-otp",e.MfaSentHandle="mfa-sent-handle",e))(Ar||{}),He=(e=>(e.Retry="device-retry",e))(He||{}),Sr=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(Sr||{}),he=(e=>(e.Retry="Recency/auth-factor-retry",e.Cancel="Recency/auth-factor-verification-cancel",e.VerifyEmailOtp="Recency/auth-factor-verify-email-otp",e.VerifyMFACode="Recency/verify-mfa-code",e))(he||{}),Nr=(e=>(e.PrimaryAuthFactorNeedsVerification="Recency/auth-factor-needs-verification",e.PrimaryAuthFactorVerified="Recency/auth-factor-verified",e.InvalidEmailOtp="Recency/auth-factor-invalid-email-otp",e.EmailExpired="Recency/auth-factor-verification-email-expired",e.EmailSent="Recency/auth-factor-verification-email-sent",e.EmailNotDeliverable="Recency/auth-factor-verification-email-not-deliverable",e))(Nr||{}),Ee=(e=>(e.RetryWithNewEmail="UpdateEmail/retry-with-new-email",e.Cancel="UpdateEmail/new-email-verification-cancel",e.VerifyEmailOtp="UpdateEmail/new-email-verify-otp",e))(Ee||{}),Or=(e=>(e.NewAuthFactorNeedsVerification="UpdateEmail/new-email-needs-verification",e.EmailUpdated="UpdateEmail/email-updated",e.InvalidEmailOtp="UpdateEmail/new-email-invalid-email-otp",e.EmailExpired="UpdateEmail/new-email-verification-email-expired",e.EmailSent="UpdateEmail/new-email-verification-email-sent",e.EmailNotDeliverable="UpdateEmail/new-email-verification-email-not-deliverable",e.InvalidEmail="UpdateEmail/new-email-invalid",e.EmailAlreadyExists="UpdateEmail/new-email-already-exists",e))(Or||{}),Tr=(e=>(e.IDTokenCreated="Auth/id-token-created",e))(Tr||{}),Mr=(e=>(e.SuccessSignIn="Farcaster/success_sign_in",e))(Mr||{}),Lr=(e=>(e.MFASecretGenerated="mfa-secret-generated",e.InvalidMFAOtp="invalid-mfa-otp",e.MFARecoveryCodes="mfa-recovery-codes",e))(Lr||{}),Cr=(e=>(e.VerifyMFACode="verify-mfa-code",e.Cancel="cancel-mfa-setup",e))(Cr||{}),Pr=(e=>(e.Harmony="HARMONY",e))(Pr||{}),ot=(e=>(e.ClosedByUser="closed-by-user",e))(ot||{}),at=(e=>(e.ClosedByUser="closed-by-user-on-received",e))(at||{}),$r=(e=>(e.PhoneNumber="phone_number",e))($r||{}),Dr=(e=>(e.Success="nft-checkout-success",e.Failure="nft-checkout-failure",e.Initiated="nft-checkout-initiated",e.Disconnect="disconnect",e))(Dr||{}),xr=(e=>(e.WalletInfoFetched="Wallet/wallet-info-fetched",e))(xr||{}),Ur=(e=>(e.CloseMagicWindow="close-magic-window",e))(Ur||{});var Ri=Object.create,vt=Object.defineProperty,Ai=Object.defineProperties,Si=Object.getOwnPropertyDescriptor,Ni=Object.getOwnPropertyDescriptors,Oi=Object.getOwnPropertyNames,kr=Object.getOwnPropertySymbols,Ti=Object.getPrototypeOf,Qr=Object.prototype.hasOwnProperty,Mi=Object.prototype.propertyIsEnumerable,Fr=(e,t,r)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pt=(e,t)=>{for(var r in t||(t={}))Qr.call(t,r)&&Fr(e,r,t[r]);if(kr)for(var r of kr(t))Mi.call(t,r)&&Fr(e,r,t[r]);return e},$t=(e,t)=>Ai(e,Ni(t)),Li=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ci=(e,t)=>{for(var r in t)vt(e,r,{get:t[r],enumerable:!0})},Pi=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Oi(t))!Qr.call(e,a)&&a!==r&&vt(e,a,{get:()=>t[a],enumerable:!(o=Si(t,a))||o.enumerable});return e},$i=(e,t,r)=>(r=e!=null?Ri(Ti(e)):{},Pi(t||!e||!e.__esModule?vt(r,"default",{value:e,enumerable:!0}):r,e)),X=(e,t,r)=>new Promise((o,a)=>{var s=g=>{try{d(r.next(g))}catch(v){a(v)}},m=g=>{try{d(r.throw(g))}catch(v){a(v)}},d=g=>g.done?o(g.value):Promise.resolve(g.value).then(s,m);d((r=r.apply(e,t)).next())}),Di=Li((e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function s(v,y,O){this.fn=v,this.context=y,this.once=O||!1}function m(v,y,O,_,N){if(typeof O!="function")throw new TypeError("The listener must be a function");var L=new s(O,_||v,N),k=o?o+y:y;return v._events[k]?v._events[k].fn?v._events[k]=[v._events[k],L]:v._events[k].push(L):(v._events[k]=L,v._eventsCount++),v}function d(v,y){--v._eventsCount===0?v._events=new a:delete v._events[y]}function g(){this._events=new a,this._eventsCount=0}g.prototype.eventNames=function(){var v=[],y,O;if(this._eventsCount===0)return v;for(O in y=this._events)r.call(y,O)&&v.push(o?O.slice(1):O);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(y)):v},g.prototype.listeners=function(v){var y=o?o+v:v,O=this._events[y];if(!O)return[];if(O.fn)return[O.fn];for(var _=0,N=O.length,L=new Array(N);_<N;_++)L[_]=O[_].fn;return L},g.prototype.listenerCount=function(v){var y=o?o+v:v,O=this._events[y];return O?O.fn?1:O.length:0},g.prototype.emit=function(v,y,O,_,N,L){var k=o?o+v:v;if(!this._events[k])return!1;var C=this._events[k],B=arguments.length,Q,D;if(C.fn){switch(C.once&&this.removeListener(v,C.fn,void 0,!0),B){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,y),!0;case 3:return C.fn.call(C.context,y,O),!0;case 4:return C.fn.call(C.context,y,O,_),!0;case 5:return C.fn.call(C.context,y,O,_,N),!0;case 6:return C.fn.call(C.context,y,O,_,N,L),!0}for(D=1,Q=new Array(B-1);D<B;D++)Q[D-1]=arguments[D];C.fn.apply(C.context,Q)}else{var Ie=C.length,ie;for(D=0;D<Ie;D++)switch(C[D].once&&this.removeListener(v,C[D].fn,void 0,!0),B){case 1:C[D].fn.call(C[D].context);break;case 2:C[D].fn.call(C[D].context,y);break;case 3:C[D].fn.call(C[D].context,y,O);break;case 4:C[D].fn.call(C[D].context,y,O,_);break;default:if(!Q)for(ie=1,Q=new Array(B-1);ie<B;ie++)Q[ie-1]=arguments[ie];C[D].fn.apply(C[D].context,Q)}}return!0},g.prototype.on=function(v,y,O){return m(this,v,y,O,!1)},g.prototype.once=function(v,y,O){return m(this,v,y,O,!0)},g.prototype.removeListener=function(v,y,O,_){var N=o?o+v:v;if(!this._events[N])return this;if(!y)return d(this,N),this;var L=this._events[N];if(L.fn)L.fn===y&&(!_||L.once)&&(!O||L.context===O)&&d(this,N);else{for(var k=0,C=[],B=L.length;k<B;k++)(L[k].fn!==y||_&&!L[k].once||O&&L[k].context!==O)&&C.push(L[k]);C.length?this._events[N]=C.length===1?C[0]:C:d(this,N)}return this},g.prototype.removeAllListeners=function(v){var y;return v?(y=o?o+v:v,this._events[y]&&d(this,y)):(this._events=new a,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prefixed=o,g.EventEmitter=g,typeof t<"u"&&(t.exports=g)});function xi(e){let t={exports:{}};return e(t,t.exports),t.exports}var Ui=Number.MAX_SAFE_INTEGER||9007199254740991,Dt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Ui,MAX_SAFE_COMPONENT_LENGTH:16},ki=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},H=ki,rt=xi(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=Dt,o=(t=e.exports={}).re=[],a=t.src=[],s=t.t={},m=0,d=(g,v,y)=>{let O=m++;H(O,v),s[g]=O,a[O]=v,o[O]=new RegExp(v,y?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","[0-9]+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),d("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER","[0-9A-Za-z-]+"),d("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),d("FULL",`^${a[s.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),d("LOOSE",`^${a[s.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),d("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),d("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),d("COERCERTL",a[s.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0.0.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Wr=/^[0-9]+$/,Zr=(e,t)=>{let r=Wr.test(e),o=Wr.test(t);return r&&o&&(e=+e,t=+t),e===t?0:r&&!o?-1:o&&!r?1:e<t?-1:1},Fi=(e,t)=>Zr(t,e),Wi={compareIdentifiers:Zr,rcompareIdentifiers:Fi},{MAX_LENGTH:Br,MAX_SAFE_INTEGER:st}=Dt,{re:Gr,t:jr}=rt,{compareIdentifiers:Ye}=Wi,te=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof te){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Br)throw new TypeError(`version is longer than ${Br} characters`);H("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Gr[jr.LOOSE]:Gr[jr.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>st||this.major<0)throw new TypeError("Invalid major version");if(this.minor>st||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>st||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let a=+o;if(a>=0&&a<st)return a}return o}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(H("SemVer.compare",this.version,this.options,e),!(e instanceof te)){if(typeof e=="string"&&e===this.version)return 0;e=new te(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof te||(e=new te(e,this.options)),Ye(this.major,e.major)||Ye(this.minor,e.minor)||Ye(this.patch,e.patch)}comparePre(e){if(e instanceof te||(e=new te(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],o=e.prerelease[t];if(H("prerelease compare",t,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r!==o)return Ye(r,o)}while(++t)}compareBuild(e){e instanceof te||(e=new te(e,this.options));let t=0;do{let r=this.build[t],o=e.build[t];if(H("prerelease compare",t,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r!==o)return Ye(r,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},Bi=(e,t,r)=>new te(e,r).compare(new te(t,r)),Be=Bi,Gi=(e,t,r)=>Be(e,t,r)===0,ji=Gi,Vi=(e,t,r)=>Be(e,t,r)!==0,qi=Vi,Ki=(e,t,r)=>Be(e,t,r)>0,Hi=Ki,Yi=(e,t,r)=>Be(e,t,r)>=0,Xi=Yi,zi=(e,t,r)=>Be(e,t,r)<0,Ji=zi,Qi=(e,t,r)=>Be(e,t,r)<=0,Zi=Qi,eo=(e,t,r,o)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return ji(e,r,o);case"!=":return qi(e,r,o);case">":return Hi(e,r,o);case">=":return Xi(e,r,o);case"<":return Ji(e,r,o);case"<=":return Zi(e,r,o);default:throw new TypeError(`Invalid operator: ${t}`)}},Lt=eo,Xe=Symbol("SemVer ANY"),Ze=class{static get ANY(){return Xe}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ze){if(e.loose===!!t.loose)return e;e=e.value}H("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Xe?this.value="":this.value=this.operator+this.semver.version,H("comp",this)}parse(e){let t=this.options.loose?Vr[qr.COMPARATORLOOSE]:Vr[qr.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new te(r[2],this.options.loose):this.semver=Xe}toString(){return this.value}test(e){if(H("Comparator.test",e,this.options.loose),this.semver===Xe||e===Xe)return!0;if(typeof e=="string")try{e=new te(e,this.options)}catch(t){return!1}return Lt(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Ze))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new ke(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new ke(this.value,t).test(e.semver);let r=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),o=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),a=this.semver.version===e.semver.version,s=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),m=Lt(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),d=Lt(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||o||a&&s||m||d}},{re:Vr,t:qr}=rt,ke=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ke)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ke(e.raw,t);if(e instanceof Ze)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let r=t?ne[re.HYPHENRANGELOOSE]:ne[re.HYPHENRANGE];e=e.replace(r,mo(this.options.includePrerelease)),H("hyphen replace",e),e=e.replace(ne[re.COMPARATORTRIM],to),H("comparator trim",e,ne[re.COMPARATORTRIM]),e=(e=(e=e.replace(ne[re.TILDETRIM],ro)).replace(ne[re.CARETTRIM],no)).split(/\s+/).join(" ");let o=t?ne[re.COMPARATORLOOSE]:ne[re.COMPARATOR];return e.split(" ").map(a=>io(a,this.options)).join(" ").split(/\s+/).map(a=>ho(a,this.options)).filter(this.options.loose?a=>!!a.match(o):()=>!0).map(a=>new Ze(a,this.options))}intersects(e,t){if(!(e instanceof ke))throw new TypeError("a Range is required");return this.set.some(r=>Kr(r,t)&&e.set.some(o=>Kr(o,t)&&r.every(a=>o.every(s=>a.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new te(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(po(this.set[t],e,this.options))return!0;return!1}},{re:ne,t:re,comparatorTrimReplace:to,tildeTrimReplace:ro,caretTrimReplace:no}=rt,Kr=(e,t)=>{let r=!0,o=e.slice(),a=o.pop();for(;r&&o.length;)r=o.every(s=>a.intersects(s,t)),a=o.pop();return r},io=(e,t)=>(H("comp",e,t),e=so(e,t),H("caret",e),e=oo(e,t),H("tildes",e),e=co(e,t),H("xrange",e),e=fo(e,t),H("stars",e),e),ae=e=>!e||e.toLowerCase()==="x"||e==="*",oo=(e,t)=>e.trim().split(/\s+/).map(r=>ao(r,t)).join(" "),ao=(e,t)=>{let r=t.loose?ne[re.TILDELOOSE]:ne[re.TILDE];return e.replace(r,(o,a,s,m,d)=>{let g;return H("tilde",e,o,a,s,m,d),ae(a)?g="":ae(s)?g=`>=${a}.0.0 <${+a+1}.0.0-0`:ae(m)?g=`>=${a}.${s}.0 <${a}.${+s+1}.0-0`:d?(H("replaceTilde pr",d),g=`>=${a}.${s}.${m}-${d} <${a}.${+s+1}.0-0`):g=`>=${a}.${s}.${m} <${a}.${+s+1}.0-0`,H("tilde return",g),g})},so=(e,t)=>e.trim().split(/\s+/).map(r=>lo(r,t)).join(" "),lo=(e,t)=>{H("caret",e,t);let r=t.loose?ne[re.CARETLOOSE]:ne[re.CARET],o=t.includePrerelease?"-0":"";return e.replace(r,(a,s,m,d,g)=>{let v;return H("caret",e,a,s,m,d,g),ae(s)?v="":ae(m)?v=`>=${s}.0.0${o} <${+s+1}.0.0-0`:ae(d)?v=s==="0"?`>=${s}.${m}.0${o} <${s}.${+m+1}.0-0`:`>=${s}.${m}.0${o} <${+s+1}.0.0-0`:g?(H("replaceCaret pr",g),v=s==="0"?m==="0"?`>=${s}.${m}.${d}-${g} <${s}.${m}.${+d+1}-0`:`>=${s}.${m}.${d}-${g} <${s}.${+m+1}.0-0`:`>=${s}.${m}.${d}-${g} <${+s+1}.0.0-0`):(H("no pr"),v=s==="0"?m==="0"?`>=${s}.${m}.${d}${o} <${s}.${m}.${+d+1}-0`:`>=${s}.${m}.${d}${o} <${s}.${+m+1}.0-0`:`>=${s}.${m}.${d} <${+s+1}.0.0-0`),H("caret return",v),v})},co=(e,t)=>(H("replaceXRanges",e,t),e.split(/\s+/).map(r=>uo(r,t)).join(" ")),uo=(e,t)=>{e=e.trim();let r=t.loose?ne[re.XRANGELOOSE]:ne[re.XRANGE];return e.replace(r,(o,a,s,m,d,g)=>{H("xRange",e,o,a,s,m,d,g);let v=ae(s),y=v||ae(m),O=y||ae(d),_=O;return a==="="&&_&&(a=""),g=t.includePrerelease?"-0":"",v?o=a===">"||a==="<"?"<0.0.0-0":"*":a&&_?(y&&(m=0),d=0,a===">"?(a=">=",y?(s=+s+1,m=0,d=0):(m=+m+1,d=0)):a==="<="&&(a="<",y?s=+s+1:m=+m+1),a==="<"&&(g="-0"),o=`${a+s}.${m}.${d}${g}`):y?o=`>=${s}.0.0${g} <${+s+1}.0.0-0`:O&&(o=`>=${s}.${m}.0${g} <${s}.${+m+1}.0-0`),H("xRange return",o),o})},fo=(e,t)=>(H("replaceStars",e,t),e.trim().replace(ne[re.STAR],"")),ho=(e,t)=>(H("replaceGTE0",e,t),e.trim().replace(ne[t.includePrerelease?re.GTE0PRE:re.GTE0],"")),mo=e=>(t,r,o,a,s,m,d,g,v,y,O,_,N)=>`${r=ae(o)?"":ae(a)?`>=${o}.0.0${e?"-0":""}`:ae(s)?`>=${o}.${a}.0${e?"-0":""}`:m?`>=${r}`:`>=${r}${e?"-0":""}`} ${g=ae(v)?"":ae(y)?`<${+v+1}.0.0-0`:ae(O)?`<${v}.${+y+1}.0-0`:_?`<=${v}.${y}.${O}-${_}`:e?`<${v}.${y}.${+O+1}-0`:`<=${g}`}`.trim(),po=(e,t,r)=>{for(let o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let o=0;o<e.length;o++)if(H(e[o].semver),e[o].semver!==Ze.ANY&&e[o].semver.prerelease.length>0){let a=e[o].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0},vo=(e,t,r)=>{try{t=new ke(t,r)}catch(o){return!1}return t.test(e)},{MAX_LENGTH:go}=Dt,{re:Hr,t:Yr}=rt,yo=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof te)return e;if(typeof e!="string"||e.length>go||!(t.loose?Hr[Yr.LOOSE]:Hr[Yr.FULL]).test(e))return null;try{return new te(e,t)}catch(r){return null}},Eo=yo,{re:lt,t:ct}=rt,_o=(e,t)=>{if(e instanceof te)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let o;for(;(o=lt[ct.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&o.index+o[0].length===r.index+r[0].length||(r=o),lt[ct.COERCERTL].lastIndex=o.index+o[1].length+o[2].length;lt[ct.COERCERTL].lastIndex=-1}else r=e.match(lt[ct.COERCE]);return r===null?null:Eo(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function Io(e){return String.fromCharCode(parseInt(e.slice(1),16))}function wo(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function bo(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,Io))}function Ro(e){return decodeURIComponent(Array.from(atob(e),wo).join(""))}function en(e){return bo(JSON.stringify(e))}function Ao(e){return JSON.parse(Ro(e))}function ze(e){return typeof e=="undefined"}function So(e){return e===null}function tn(e){return So(e)||ze(e)}function No(e){return tn(e)?!1:!ze(e.jsonrpc)&&!ze(e.id)&&(!ze(e.result)||!ze(e.error))}function Oo(e){return tn(e)?!1:typeof e=="number"&&Object.values(De).includes(e)}function ht(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var Y={};function rn(e,t){return Object.assign(Y,t),e}var To={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},_e=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,_e.prototype)}},We=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=Oo(t)?t:De.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(e==null?void 0:e.data)||void 0,Object.setPrototypeOf(this,We.prototype)}},Me=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},gt=class extends Error{constructor(e,t,r,o){super(`Magic Extension Error (${e.name}): [${t}] ${r}`),this.code=t,this.rawMessage=r,this.data=o,this.__proto__=Error,Object.setPrototypeOf(this,gt.prototype)}},mt=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function Mo(){return new _e(ve.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function xt(){return new _e(ve.ModalNotReady,"Modal is not ready.")}function Lo(){return new _e(ve.MalformedResponse,"Response from the Magic iframe is malformed.")}function Co(e){return new _e(ve.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Po(e){let t=`Some extensions are incompatible with \`${Y.sdkName}@${Y.version}\`:`;return e.filter(r=>typeof r.compat!="undefined"&&r.compat!==null).forEach(r=>{let o=r.compat[Y.sdkName];typeof o=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${o}\``:o||(t+=`
  - Extension \`${r.name}\` does not support ${Y.platform} environments.`)}),new _e(ve.IncompatibleExtensions,t)}function $o(e){let t=r=>{let o=r+1,a=o%10,s=o%100;return a===1&&s!==11?`${o}st`:a===2&&s!==12?`${o}nd`:a===3&&s!==13?`${o}rd`:`${o}th`};return new _e(ve.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function nn(){return new Me(ge.DuplicateIframe,"Duplicate iframes found.")}function Do(){return new Me(ge.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function xo(){return new Me(ge.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${Y.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function Je(e){let{method:t,removalVersions:r,useInstead:o}=e,a=r[Y.sdkName],s=o?` Use \`${o}\` instead.`:"",m=`\`${t}\` will be removed from \`${Y.sdkName}\` in version \`${a}\`.${s}`;return new Me(ge.DeprecationNotice,m)}function*Uo(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var ko=Uo();function on(){return ko.next().value}var an=Symbol("Payload pre-processed by Magic SDK");function sn(e){return Object.defineProperty(e,an,{value:!0,enumerable:!1}),e}function Fo(e){return!!e[an]}function pt(e){var t,r,o;return Fo(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=on(),e.method=(r=e.method)!=null?r:"noop",e.params=(o=e.params)!=null?o:[],sn(e)),e}function W(e,t=[]){return sn({params:t,method:e,jsonrpc:"2.0",id:on()})}var Ut=class{constructor(e){e instanceof Ut?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):No(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error!="undefined"&&this._error!==null}get hasResult(){return typeof this._result!="undefined"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Wo=$i(Di()),Bo=class extends Wo.default{};function ln(){let e=new Bo;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...o)=>(e[t].apply(e,o),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var cn=Symbol("isPromiEvent");function kt(e){return!!e[cn]}function et(e){let t=un(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:o}=ln(),a=Symbol("Promise.then"),s=Symbol("Promise.catch"),m=Symbol("Promise.finally"),d=(y,O)=>(..._)=>{let N=O[y].apply(O,_);return g(N)},g=y=>Object.assign(y,{[cn]:!0,[a]:y[a]||y.then,[s]:y[s]||y.catch,[m]:y[m]||y.finally,then:d(a,y),catch:d(s,y),finally:d(m,y),on:o("on",y),once:o("once",y),addListener:o("addListener",y),off:o("off",y),removeListener:o("removeListener",y),removeAllListeners:o("removeAllListeners",y),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),v=g(t.then(y=>(v.emit("done",y),v.emit("settled"),y),y=>{throw v.emit("error",y),v.emit("settled"),y}));return v.on(at.ClosedByUser,()=>{v.emit(ot.ClosedByUser)}),v}function un(e){return new Promise((t,r)=>{let o=e(t,r);Promise.resolve(o).catch(r)})}var Le=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(Ne.MAGIC_HANDLE_REQUEST,pt(e)),r=et((a,s)=>{t.then(m=>{if(o(),m.hasError)s(new We(m.payload.error));else if(m.hasResult)a(m.payload.result);else throw Lo()}).catch(m=>{o(),s(m)})}),o=this.overlay.on(me.MAGIC_HANDLE_EVENT,a=>{var s;let{response:m}=a.data;if(m.id===e.id&&((s=m.result)==null?void 0:s.event)){let{event:d,params:g=[]}=m.result;r.emit(d,...g)}});return r}createIntermediaryEvent(e,t){return r=>{let o=W(M.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(o)}}};function Go(e,t){let[r]=e.split(".").map(Number);return r>=t}var Qe={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},jo=class extends Le{loginWithMagicLink(e){let t=Y.sdkName==="@magic-sdk/react-native"||Y.sdkName==="@magic-sdk/react-native-bare"||Y.sdkName==="@magic-sdk/react-native-expo";if(t&&Go(Y.version,19))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");t&&Je({method:"auth.loginWithMagicLink()",removalVersions:Qe,useInstead:"auth.loginWithEmailOTP()"}).log();let{email:r,showUI:o=!0,redirectURI:a,overrides:s,lifespan:m}=e,d=W(this.sdk.testMode?M.LoginWithMagicLinkTestMode:M.LoginWithMagicLink,[{email:r,showUI:o,redirectURI:a,overrides:s,lifespan:m}]);return this.request(d)}loginWithSMS(e){let{phoneNumber:t,showUI:r=!0,lifespan:o}=e,a=W(this.sdk.testMode?M.LoginWithSmsTestMode:M.LoginWithSms,[{phoneNumber:t,showUI:r,lifespan:o}]),s=this.request(a);return!r&&s&&(s.on(Oe.VerifySmsOtp,m=>{this.createIntermediaryEvent(Oe.VerifySmsOtp,a.id)(m)}),s.on(Oe.Cancel,()=>{this.createIntermediaryEvent(Oe.Cancel,a.id)()})),s}loginWithEmailOTP(e){let{email:t,showUI:r,deviceCheckUI:o,overrides:a,lifespan:s}=e,m=W(this.sdk.testMode?M.LoginWithEmailOTPTestMode:M.LoginWithEmailOTP,[{email:t,showUI:r,deviceCheckUI:o,overrides:a,lifespan:s}]),d=this.request(m);return!o&&d&&d.on(He.Retry,()=>{this.createIntermediaryEvent(He.Retry,m.id)()}),!r&&d&&(d.on(ye.VerifyEmailOtp,g=>{this.createIntermediaryEvent(ye.VerifyEmailOtp,m.id)(g)}),d.on(ye.VerifyMFACode,g=>{this.createIntermediaryEvent(ye.VerifyMFACode,m.id)(g)}),d.on(ye.Cancel,()=>{this.createIntermediaryEvent(ye.Cancel,m.id)()})),d}loginWithCredential(e){let{credentialOrQueryString:t,lifespan:r}=e||{},o=t!=null?t:"";if(!t&&Y.platform==="web"){o=window.location.search;let s=window.location.origin+window.location.pathname;window.history.replaceState(null,"",s)}let a=W(this.sdk.testMode?M.LoginWithCredentialTestMode:M.LoginWithCredential,[o,r]);return this.request(a)}setAuthorizationToken(e){let t=W(M.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){let{email:t,showUI:r=!0}=e,o=W(this.sdk.testMode?M.UpdateEmailTestMode:M.UpdateEmail,[{email:t,showUI:r}]),a=this.request(o);return r||(a.on(he.Retry,()=>{this.createIntermediaryEvent(he.Retry,o.id)()}),a.on(he.Cancel,()=>{this.createIntermediaryEvent(he.Cancel,o.id)()}),a.on(he.VerifyEmailOtp,s=>{this.createIntermediaryEvent(he.VerifyEmailOtp,o.id)(s)}),a.on(he.VerifyMFACode,s=>{this.createIntermediaryEvent(he.VerifyMFACode,o.id)(s)}),a.on(Ee.RetryWithNewEmail,s=>{this.createIntermediaryEvent(Ee.RetryWithNewEmail,o.id)(s)}),a.on(Ee.Cancel,()=>{this.createIntermediaryEvent(Ee.Cancel,o.id)()}),a.on(Ee.VerifyEmailOtp,s=>{this.createIntermediaryEvent(Ee.VerifyEmailOtp,o.id)(s)})),a}},fn={};Ci(fn,{clear:()=>Vo,getItem:()=>se,iterate:()=>dn,key:()=>Ko,keys:()=>Ho,length:()=>qo,removeItem:()=>Fe,setItem:()=>pe});var ut;function Re(e){return(...t)=>X(this,null,function*(){return ut||(ut=yield Y.configureStorage()),yield ut.ready(),ut[e](...t)})}var se=Re("getItem"),pe=Re("setItem"),Fe=Re("removeItem"),Vo=Re("clear"),qo=Re("length"),Ko=Re("key"),Ho=Re("keys"),dn=Re("iterate");function Yo(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var hn="STORE_KEY_PRIVATE_KEY",Ct="STORE_KEY_PUBLIC_JWK",mn="ECDSA",Xo="P-256",zo={name:mn,namedCurve:Xo};function yt(){let e=typeof window!="undefined"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function Jo(){return X(this,null,function*(){let e=yield Qo();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=yield se(hn);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let o={iat:Math.floor(new Date().getTime()/1e3),jti:Yo()},a={typ:"dpop+jwt",alg:"ES256",jwk:e},s={protected:Xr(JSON.stringify(a)),claims:Xr(JSON.stringify(o))},m=ea(`${s.protected}.${s.claims}`),d={name:mn,hash:{name:"SHA-256"}},g=ra(new Uint8Array(yield t.sign(d,r,m)));return`${s.protected}.${s.claims}.${g}`})}function Qo(){return X(this,null,function*(){if(!yt()){console.info("webcrypto is not supported");return}return(yield se(Ct))||(yield Zo()),se(Ct)})}function Zo(){return X(this,null,function*(){let{subtle:e}=window.crypto,t=yield e.generateKey(zo,!1,["sign"]),r=yield e.exportKey("jwk",t.publicKey);yield pe(hn,t.privateKey),yield pe(Ct,r)})}function Xr(e){return pn(ta(e))}function ea(e){return new TextEncoder().encode(e)}function pn(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function ta(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function ra(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),pn(t)}var Ft="ds",Wt="ek",Bt="iv",Gt="AES-GCM",na=256;function jt(){return X(this,null,function*(){let e=[];yield dn((t,r,o)=>{r.startsWith(`${Ft}_`)&&e.push(r)});for(let t of e)yield Fe(t)})}function vn(e){let t="",r=new Uint8Array(e),o=r.byteLength;for(let a=0;a<o;a++)t+=String.fromCharCode(r[a]);return window.btoa(t)}function gn(e){let t=window.atob(e),r=t.length,o=new Uint8Array(r);for(let a=0;a<r;a++)o[a]=t.charCodeAt(a);return o.buffer}function ia(){return X(this,null,function*(){if(!yt()){console.info("webcrypto is not supported");return}let{crypto:e}=window;return(yield se(Bt))||e.getRandomValues(new Uint8Array(12))})}function oa(){return X(this,null,function*(){if(!yt()){console.info("webcrypto is not supported");return}let{subtle:e}=window.crypto;return(yield se(Wt))||(yield e.generateKey({name:Gt,length:na},!1,["encrypt","decrypt"]))})}function aa(e,t){return X(this,null,function*(){let r=yield ia(),o=yield oa();if(!r||!o||!e)return;let a=gn(e),{subtle:s}=window.crypto,m=yield s.encrypt({name:Gt,iv:r},o,a),d=vn(m);yield pe(`${Ft}_${t}`,d),yield pe(Wt,o),yield pe(Bt,r)})}function sa(e){return X(this,null,function*(){let t=yield se(`${Ft}_${e}`),r=yield se(Bt),o=yield se(Wt);if(!r||!t||!o||!yt())return;let{subtle:a}=window.crypto,s=yield a.decrypt({name:Gt,iv:r},o,gn(t));return vn(s)})}function tt(e,t){return t?new URL(e,t):new URL(e)}var la=class extends Le{constructor(){super(...arguments),this.localForageKey="mc_active_wallet",this.localForageIsLoggedInKey="magic_auth_is_logged_in",this.userLoggedOutCallbacks=[]}getIdToken(e){let t=W(this.sdk.testMode?M.GetIdTokenTestMode:M.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=W(this.sdk.testMode?M.GenerateIdTokenTestMode:M.GenerateIdToken,[e]);return this.request(t)}getInfo(){return X(this,null,function*(){let e=yield se(this.localForageKey),t=W(M.GetInfo,[{walletType:e}]);return this.request(t)})}isLoggedIn(){return et((e,t)=>X(this,null,function*(){try{let r=!1;this.sdk.useStorageCache&&(r=(yield se(this.localForageIsLoggedInKey))==="true",r&&e(!0));let o=W(this.sdk.testMode?M.IsLoggedInTestMode:M.IsLoggedIn),a=yield this.request(o);this.sdk.useStorageCache&&(a?pe(this.localForageIsLoggedInKey,!0):Fe(this.localForageIsLoggedInKey),r&&!a&&this.emitUserLoggedOut(!0)),e(a)}catch(r){t(r)}}))}logout(){return Fe(this.localForageKey),Fe(this.localForageIsLoggedInKey),jt(),et((e,t)=>X(this,null,function*(){try{let r=W(this.sdk.testMode?M.LogoutTestMode:M.Logout),o=yield this.request(r);this.sdk.useStorageCache&&this.emitUserLoggedOut(o),e(o)}catch(r){t(r)}}))}requestInfoWithUI(e){let t=W(M.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let t=W(this.sdk.testMode?M.UserSettingsTestMode:M.UserSettings,[e]);return this.request(t)}recoverAccount(e){let t=W(this.sdk.testMode?M.RecoverAccountTestMode:M.RecoverAccount,[e]);return this.request(t)}revealPrivateKey(){let e=W(M.RevealPK);return this.request(e)}getMetadata(){Je({method:"user.getMetadata()",removalVersions:Qe,useInstead:"user.getInfo()"}).log();let e=W(this.sdk.testMode?M.GetMetadataTestMode:M.GetMetadata);return this.request(e)}onUserLoggedOut(e){this.userLoggedOutCallbacks.push(e)}enableMFA(){let e=W(M.EnableMFA);return this.request(e)}disableMFA(){let e=W(M.DisableMFA);return this.request(e)}emitUserLoggedOut(e){this.userLoggedOutCallbacks.forEach(t=>{t(e)})}},ca=class extends Le{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}connectWithUI(){let e=et((t,r)=>X(this,null,function*(){try{if(this.isMetaMaskBrowser()&&(yield this.isWalletEnabled(ue.MetaMask))){let d=yield this.autoConnectIfWalletBrowser(ue.MetaMask);t(d);return}if(this.isCoinbaseWalletBrowser()&&(yield this.isWalletEnabled(ue.CoinbaseWallet))){let d=yield this.autoConnectIfWalletBrowser(ue.CoinbaseWallet);t(d);return}let o=this.getUserEnv(),a=W(M.Login,[o]),s=this.request(a);s.on(xe.WalletSelected,d=>this.handleWalletSelected($t(Pt({},d),{payloadId:a.id}))),s.on("id-token-created",d=>{e.emit("id-token-created",d)});let m=yield s;m.error&&r(m),t(m)}catch(o){r(o)}}));return e}showUI(e){return this.request(W(M.ShowUI,[e]))}showAddress(){return this.request(W(M.ShowAddress))}showSendTokensUI(){return this.request(W(M.ShowSendTokensUI))}showOnRamp(){return this.request(W(M.ShowOnRamp))}showNFTs(){return this.request(W(M.ShowNFTs))}showBalances(){return this.request(W(M.ShowBalances))}sendGaslessTransaction(e,t){return this.request(W(M.SendGaslessTransaction,[e,t]))}getInfo(){return X(this,null,function*(){Je({method:"wallet.getInfo()",removalVersions:Qe,useInstead:"user.getInfo()"}).log();let e=yield se(this.localForageKey),t=W(M.GetInfo,[{walletType:e}]);return this.request(t)})}disconnect(){Je({method:"wallet.disconnect()",removalVersions:Qe,useInstead:"user.logout()"}).log(),Fe(this.localForageKey),jt();let e=W(M.Disconnect);return this.request(e)}requestUserInfoWithUI(e){Je({method:"wallet.requestUserInfoWithUI()",removalVersions:Qe,useInstead:"user.requestUserInfoWithUI()"}).log();let t=W(M.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}getProvider(){return X(this,null,function*(){switch(yield se(this.localForageKey)){case ue.MetaMask:return this.getMetaMaskProvider();case ue.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var e,t,r;return((e=window.ethereum)==null?void 0:e.isMetaMask)||!!((r=(t=window.ethereum)==null?void 0:t.providers)!=null&&r.find(o=>o==null?void 0:o.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(r=>r==null?void 0:r.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&!this.isMetaMaskInstalled()){let e=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=e}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var e,t,r;return((e=window.ethereum)==null?void 0:e.isCoinbaseWallet)||!!((r=(t=window.ethereum)==null?void 0:t.providers)!=null&&r.find(o=>o==null?void 0:o.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var e;return!!((e=window.ethereum)!=null&&e.isCoinbaseBrowser)}getCoinbaseProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(r=>r==null?void 0:r.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let e=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=e}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(e){switch(e){case ue.MetaMask:return this.connectToMetaMask();case ue.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw new Error(`Invalid provider: ${e}. Must be one of "metamask" or "coinbase_wallet".`)}}isWalletEnabled(e){let t=W("mc_is_wallet_enabled",[{wallet:e}]);return this.request(t)}handleWalletSelected(e){return X(this,null,function*(){try{let t=yield this.connectToThirdPartyWallet(e.wallet);yield pe(this.localForageKey,e.wallet),this.createIntermediaryEvent(xe.WalletConnected,e.payloadId)(t)}catch(t){console.error(t),this.createIntermediaryEvent(xe.WalletRejected,e.payloadId)()}})}autoConnectIfWalletBrowser(e){return X(this,null,function*(){let t;e===ue.MetaMask&&(t=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"})),e===ue.CoinbaseWallet&&(t=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"})),yield pe(this.localForageKey,e);let r=W(M.AutoConnect,[{wallet:e,address:t}]);return this.request(r)})}},{createBoundEmitterMethod:ft,createChainingEmitterMethod:Ue}=ln(),ua=class extends Le{constructor(){super(...arguments),this.isMagic=!0,this.on=Ue("on",this),this.once=Ue("once",this),this.addListener=Ue("addListener",this),this.off=Ue("off",this),this.removeListener=Ue("removeListener",this),this.removeAllListeners=Ue("removeAllListeners",this),this.emit=ft("emit"),this.eventNames=ft("eventNames"),this.listeners=ft("listeners"),this.listenerCount=ft("listenerCount")}sendAsync(e,t){if(!t)throw $o({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Ne.MAGIC_HANDLE_REQUEST,e.map(r=>{let o=pt(r);return this.prefixPayloadMethodForTestMode(o),o})).then(r=>{t(null,r.map(o=>$t(Pt({},o.payload),{error:o.hasError?new We(o.payload.error):null})))});else{let r=pt(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(Ne.MAGIC_HANDLE_REQUEST,r).then(o=>{t(o.hasError?new We(o.payload.error):null,o.payload)})}}send(e,t){if(typeof e=="string"){let o=W(e,Array.isArray(t)?t:[]);return this.request(o)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let r=Do();return r.log(),new Ut(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=W(M.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}},zr=["request","overlay","sdk"];function fa(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==Le.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var yn=class extends Le{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:et,isPromiEvent:kt,encodeJSON:en,decodeJSON:Ao,createJsonRpcRequestPayload:W,standardizeJsonRpcRequestPayload:pt,storage:fn};let e=[this,...fa(this)];zr.forEach(t=>{let r=e.map(m=>Object.getOwnPropertyDescriptor(m,t)),o=r.findIndex(m=>!!m),a=o>0,s=r[o];s&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:s,isPrototypeField:a}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw Co(t)}}))})}init(e){this.__is_initialized__||(zr.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:o}=this.__sdk_access_field_descriptors__.get(t);o?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:o}=e,a=o?` Use \`${o}\` instead.`:"",s=`\`${t}\` will be removed from this Extension in version \`${r}\`.${a}`;return new mt(this,"DEPRECATION_NOTICE",s)}createWarning(e,t){return new mt(this,e,t)}createError(e,t,r){return new gt(this,e,t,r)}},da=class extends yn{},Te=class extends yn{};Te.Internal=da,Te.Anonymous="anonymous extension";var ha=class extends Le{purchase(e){let t=W(M.NFTPurchase,[e]);return this.request(t)}checkout(e){let t=W(M.NFTCheckout,[e]);return this.request(t)}transfer(e){let t=W(M.NFTTransfer,[e]);return this.request(t)}};function Jr(e){return e.compat&&e.compat[Y.sdkName]!=null?typeof e.compat[Y.sdkName]=="string"?vo(_o(Y.version),e.compat[Y.sdkName]):!!e.compat[Y.sdkName]:!0}function ma(e,t,r){return!t&&!r?`${e}_eth_mainnet`:r?`${e}_${JSON.stringify(r)}`:t?typeof t=="string"?`${e}_eth_${t}`:`${e}_${t.rpcUrl}_${t.chainId}_${t.chainType}`:`${e}_unknown`}function pa(e){var t;let r=(t=e==null?void 0:e.extensions)!=null?t:[],o={},a=[];if(Array.isArray(r)?r.forEach(s=>{Jr(s)?(s.init(this),(s.name||s.name!==Te.Anonymous)&&(this[s.name]=s),s instanceof Te.Internal&&(ht(s.config)||(o[s.name]=s.config))):a.push(s)}):Object.keys(r).forEach(s=>{if(Jr(r[s])){r[s].init(this);let m=r[s];this[s]=m,m instanceof Te.Internal&&(ht(m.config)||(o[r[s].name]=m.config))}else a.push(r[s])}),a.length)throw Po(a);return o}var dt=class{constructor(e,t){this.apiKey=e;var r;if(!e)throw Mo();Y.platform==="react-native"&&(t==null?void 0:t.endpoint)&&xo().log();let{defaultEndpoint:o,version:a}=Y;this.testMode=!!(t!=null&&t.testMode),this.useStorageCache=!!(t!=null&&t.useStorageCache),this.endpoint=tt((r=t==null?void 0:t.endpoint)!=null?r:o).origin,this.auth=new jo(this),this.user=new la(this),this.wallet=new ca(this),this.nft=new ha(this),this.rpcProvider=new ua(this);let s=pa.call(this,t);this.parameters=en($t(Pt({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:tt(this.endpoint).host,sdk:To[Y.sdkName],version:a,ext:ht(s)?void 0:s,locale:(t==null?void 0:t.locale)||"en_US"},Y.bundleId?{bundleId:Y.bundleId}:{}),{meta:t==null?void 0:t.meta})),this.networkHash=ma(this.apiKey,t==null?void 0:t.network,ht(s)?void 0:s),t!=null&&t.deferPreload||this.preload()}get overlay(){if(!dt.__overlays__.has(this.parameters)){let e=new Y.ViewController(this.endpoint,this.parameters,this.networkHash);e.init(),dt.__overlays__.set(this.parameters,e)}return dt.__overlays__.get(this.parameters)}preload(){return X(this,null,function*(){yield this.overlay.checkIsReadyForRequest})}},Vt=dt;Vt.__overlays__=new Map;function va(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function ga(e,t){var r;let o=(r=t.data.response)==null?void 0:r.id,a=va(e,o);if(o&&a){let s=new Ut(a).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:o,response:s}}return{}}function ya(e,t,r){return X(this,null,function*(){var o;let a=yield se("rt"),s;if(Y.platform==="web")try{s=(o=yield se("jwt"))!=null?o:yield Jo()}catch(g){console.error("webcrypto error",g)}let m={msgType:e,payload:t};s&&(m.jwt=s),s&&a&&(m.rt=a);let d=yield sa(r);return d&&(m.deviceShare=d),m})}function Ea(e){return X(this,null,function*(){!e.data.rt||(yield pe("rt",e.data.rt))})}var En=class{constructor(e,t,r){this.endpoint=e,this.parameters=t,this.networkHash=r,this.messageHandlers=new Set,this.isConnectedToInternet=!0,this.checkIsReadyForRequest=this.waitForReady(),this.isReadyForRequest=!1,this.listen()}post(e,t){return X(this,null,function*(){return un((r,o)=>X(this,null,function*(){if(!this.isConnectedToInternet){let v=xt();o(v)}this.isReadyForRequest||(yield this.waitForReady());let a=[],s=Array.isArray(t)?t.map(v=>v.id):[],m=yield ya(`${e}-${this.parameters}`,t,this.networkHash);yield this._post(m);let d=v=>y=>{var O;let{id:_,response:N}=ga(t,y);if(Ea(y),((O=N==null?void 0:N.payload.error)==null?void 0:O.message)==="User denied account access.")jt();else if(y.data.deviceShare){let{deviceShare:L}=y.data;aa(L,this.networkHash)}_&&N&&Array.isArray(t)&&s.includes(_)?(a.push(N),a.length===t.length&&(v(),r(a))):_&&N&&!Array.isArray(t)&&_===t.id&&(v(),r(N))},g=this.on(me.MAGIC_HANDLE_RESPONSE,d(()=>g()))}))})}on(e,t){let r=t.bind(window),o=a=>{a.data.msgType===`${e}-${this.parameters}`&&r(a)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise(e=>{let t=this.on(me.MAGIC_OVERLAY_READY,()=>{this.isReadyForRequest=!0,e(),t()});setTimeout(()=>{this.isReadyForRequest=!0,e(),t()},15e3)})}listen(){this.on(me.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(me.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()}),this.on(me.MAGIC_SEND_PRODUCT_ANNOUNCEMENT,e=>{e.data.response.result.product_announcement&&new Me(ge.ProductAnnouncement,e.data.response.result.product_announcement).log()})}};var qt={};yr(qt,{AuthEventOnReceived:()=>Tr,DeepLinkPage:()=>Ir,DeviceVerificationEventEmit:()=>He,DeviceVerificationEventOnReceived:()=>Sr,EnableMFAEventEmit:()=>Cr,EnableMFAEventOnReceived:()=>Lr,EthChainType:()=>Pr,Events:()=>xe,Extension:()=>Te,ExtensionError:()=>gt,ExtensionWarning:()=>mt,FarcasterLoginEventEmit:()=>Mr,LoginWithEmailOTPEventEmit:()=>ye,LoginWithEmailOTPEventOnReceived:()=>Ar,LoginWithMagicLinkEventEmit:()=>wr,LoginWithMagicLinkEventOnReceived:()=>br,LoginWithSmsOTPEventEmit:()=>Oe,LoginWithSmsOTPEventOnReceived:()=>Rr,MagicIncomingWindowMessage:()=>me,MagicOutgoingWindowMessage:()=>Ne,MagicPayloadMethod:()=>M,NftCheckoutIntermediaryEvents:()=>Dr,RPCError:()=>We,RPCErrorCode:()=>De,RecencyCheckEventEmit:()=>he,RecencyCheckEventOnReceived:()=>Nr,RecoveryMethodType:()=>$r,SDKError:()=>_e,SDKErrorCode:()=>ve,SDKWarning:()=>Me,SDKWarningCode:()=>ge,UiEventsEmit:()=>Ur,UpdateEmailEventEmit:()=>Ee,UpdateEmailEventOnReceived:()=>Or,UserEventsEmit:()=>ot,UserEventsOnReceived:()=>at,WalletEventOnReceived:()=>xr,Wallets:()=>ue,isPromiEvent:()=>kt});var It=_r(In()),Ht=_r(bn());var _a={display:"block",visibility:"hidden",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647",opacity:"0"};function Ia(e){for(let[t,r]of Object.entries(_a))e.style[t]=r}function wa(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(r=>r.src.includes(e)))}var _t=class extends En{constructor(){super(...arguments);this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(r=>{let o=()=>{if(wa(encodeURIComponent(this.parameters)))nn().log();else{let a=document.createElement("iframe");a.classList.add("magic-iframe"),a.dataset.magicIframeLabel=tt(this.endpoint).host,a.title="Secure Modal",a.src=tt(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,a.allow="clipboard-read; clipboard-write",Ia(a),document.body.appendChild(a),r(a)}};["loaded","interactive","complete"].includes(document.readyState)?o():window.addEventListener("load",o,!1)}),window.addEventListener("message",r=>{var o;if(r.origin===this.endpoint&&r.data&&r.data.msgType&&this.messageHandlers.size){r.data.response=(o=r.data.response)!=null?o:{};for(let a of this.messageHandlers.values())a(r)}})}showOverlay(){return $e(this,null,function*(){let r=yield this.iframe;r.style.visibility="visible",r.style.opacity="1",this.activeElement=document.activeElement,r.focus()})}hideOverlay(){return $e(this,null,function*(){var o;let r=yield this.iframe;r.style.visibility="hidden",r.style.opacity="0",(o=this.activeElement)!=null&&o.focus&&this.activeElement.focus(),this.activeElement=null})}_post(r){return $e(this,null,function*(){let o=yield this.iframe;if(o&&o.contentWindow)o.contentWindow.postMessage(r,this.endpoint);else throw xt()})}};var ba=Object.assign(rn(Vt,{platform:"web",sdkName:"magic-sdk",version:"28.9.0",defaultEndpoint:"https://auth.magic.link/",ViewController:_t,configureStorage:()=>$e(void 0,null,function*(){let e=It.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(Ht),yield e.setDriver([It.default.INDEXEDDB,It.default.LOCALSTORAGE,Ht._driver]),e})}),vr({},qt)),Ra=ba;return bi(Aa);})();
if (Magic && Magic.default != null) { Magic = Object.assign(Magic.default, Magic); delete Magic.default; }
